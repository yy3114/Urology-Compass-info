<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>12æ˜Ÿåº§æœ¬é€±æ³Œå°¿ç³»çµ±é‹å‹¢</title>
    <!-- è¼‰å…¥ Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* ä½¿ç”¨ Inter å­—é«”ä½œç‚ºåŸºç¤ï¼Œä¸¦ç¢ºä¿ä¸­æ–‡å­—é«”é¡¯ç¤ºæ­£å¸¸ */
        body {
            font-family: 'Inter', 'Noto Sans TC', sans-serif;
            background-color: #eef1f6;
        }
        .header-bg {
            background-color: #1e3a8a; /* æ·±è—è‰² */
        }
        .section-title {
            color: #1d4ed8;
        }
        .disclaimer-card {
            border: 2px solid #f87171;
            background-color: #fef2f2;
        }
        
        /* ---------------------------------------------------- */
        /* è¼ªç›¤å°ˆç”¨æ¨£å¼ - æ¨¡æ“¬ç¾…ç›¤/æ˜Ÿç›¤ (ä½¿ç”¨èƒŒæ™¯åœ–ç‰‡) */
        /* ---------------------------------------------------- */
        #zodiac-wheel-container {
            width: 300px;
            height: 300px;
            position: relative;
            margin: 0 auto;
            border-radius: 50%;
            /* å¤–å±¤å…‰æšˆ/é‚Šæ¡† */
            box-shadow: 0 0 15px rgba(30, 64, 175, 0.7), 0 0 0 8px #a5b4fc; 
            overflow: hidden; /* ç¢ºä¿åœ–ç‰‡åœ¨é‚Šç•Œå…§ */
            touch-action: none; /* ç¦ç”¨ç€è¦½å™¨çš„é è¨­è§¸æ§è¡Œç‚ºï¼Œä½¿æ‰‹å‹•æ—‹è½‰æ›´æµæš¢ */
            cursor: grab; /* æ‹–æ›³æ¸¸æ¨™ */
        }
        #zodiac-wheel-container:active {
            cursor: grabbing;
        }
        
        #zodiac-wheel {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            position: relative;
            /* **** ä½¿ç”¨æ–°çš„åœ–ç‰‡ä½œç‚ºèƒŒæ™¯ **** */
            background-image: url('https://i.postimg.cc/Twhgzgdc/1764491222047.png'); 
            background-size: cover;
            background-position: center;
            /* ä¿æŒæ—‹è½‰å‹•ç•« */
            transition: transform 5s cubic-bezier(0.25, 0.1, 0.25, 1); 
        }
        
        /* ç§»é™¤èˆ‡èˆŠç‰ˆ CSS ç¹ªè£½åœ–æ¨™ç›¸é—œçš„æ¨£å¼ï¼Œå› ç‚ºå®ƒå€‘ç¾åœ¨æ˜¯åœ–ç‰‡çš„ä¸€éƒ¨åˆ† */
        .zodiac-slice, .zodiac-icon {
            display: none;
        }

        /* æŒ‡é‡æ¨£å¼ - å›ºå®šåœ¨é ‚éƒ¨ï¼ŒæŒ‡å‘è¼ªç›¤ (å·²ä¿®æ­£ï¼Œç¢ºä¿åœ¨å®¹å™¨å…§é¡¯ç¤º) */
        #pointer {
            position: absolute;
            top: 0px; /* è²¼é½Šå®¹å™¨é ‚éƒ¨ */
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 12px solid transparent; /* å¢å¤§å°ºå¯¸ */
            border-right: 12px solid transparent; /* å¢å¤§å°ºå¯¸ */
            border-top: 24px solid #ef4444; /* è®“å®ƒå‘ä¸‹æŒ‡ï¼Œä½¿å…¶å°–ç«¯åœ¨å®¹å™¨å…§ */
            border-bottom: none; /* ç§»é™¤èˆŠçš„ border */
            z-index: 10;
            /* æ·»åŠ ç™½è‰²é™°å½±/æ¿¾é¡ï¼Œä½¿å…¶åœ¨æ·±è‰²èƒŒæ™¯ä¸‹æ›´é†’ç›® */
            filter: drop-shadow(0 0 5px rgba(255, 255, 255, 1));
        }

        /* è¼ªç›¤ä¸­å¿ƒçš„è£é£¾é» (ç¾åœ¨ä¹Ÿæ˜¯æ—‹è½‰æŒ‰éˆ•) */
        #wheel-center-decoration {
            width: 64px; /* ç¸®å°å°ºå¯¸ */
            height: 64px; /* ç¸®å°å°ºå¯¸ */
            font-size: 0.875rem; /* ç¸®å°å­—é«” */
            background-color: #fcd34d; /* é‡‘è‰²ä¸­å¿ƒ */
            border-radius: 50%;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
            /* ä½¿å…¶çœ‹èµ·ä¾†å¯é»æ“Š */
            cursor: pointer; 
            user-select: none;
        }

        /* æ—‹è½‰çµæœå€å¡Š */
        #zodiac-result-card {
            min-height: 200px;
            opacity: 0;
            transition: opacity 1s ease-in-out;
        }
        .show-result {
            opacity: 1 !important;
        }
        
        /* æ‰‹é¢¨ç´ç®­é ­æ—‹è½‰ */
        .arrow.rotate-180 {
            transform: rotate(180deg);
        }
    </style>
</head>
<body>

    <header class="header-bg text-white p-6 shadow-xl sticky top-0 z-20">
        <div class="max-w-4xl mx-auto text-center">
            <!-- ç¸®å°ä¸»æ¨™é¡Œå­—é«”ï¼šå¾ text-3xl æ”¹ç‚º text-2xl -->
            <h1 class="text-2xl font-extrabold tracking-tight">
                ğŸ”® 12æ˜Ÿåº§æœ¬é€±æ³Œå°¿ç³»çµ±é‹å‹¢ âš•ï¸
            </h1>
            <!-- å‰¯æ¨™é¡Œæ›è¡Œ -->
            <p class="mt-2 text-lg opacity-80">
                æ—‹è½‰æ˜Ÿç›¤ï¼Œç™¼æ˜æ‚¨çš„å°ˆå±¬è¶£å‘³æ³Œå°¿ç³»çµ±<br class="md:hidden"> é‹å‹¢æç¤ºï¼
            </p>
        </div>
    </header>

    <main class="max-w-4xl mx-auto p-4 md:p-8">

        <!-- äº’å‹•ç¾…ç›¤å€å¡Š -->
        <section class="mb-12 bg-white p-6 rounded-xl shadow-2xl text-center">
            <h2 class="section-title text-2xl font-bold mb-6">
                ğŸ§­ æ˜Ÿåº§å¥åº·ç¾…ç›¤ ğŸ§­
            </h2>

            <!-- è¼ªç›¤ä¸»é«” -->
            <div id="zodiac-wheel-container">
                <div id="pointer"></div>
                <div id="zodiac-wheel">
                    <!-- è¼ªç›¤åœ–ç‰‡åœ¨é€™è£¡ä½œç‚ºèƒŒæ™¯é¡¯ç¤º -->
                </div>
                <!-- ä¸­å¿ƒé»è£é£¾ / Spin Trigger -->
                <div class="absolute inset-0 flex items-center justify-center">
                    <div id="wheel-center-decoration" class="flex items-center justify-center text-gray-900 font-extrabold text-sm shadow-xl border-4 border-white/50 cursor-pointer hover:scale-105 transition duration-150">
                        GO!
                    </div>
                </div>
            </div>

            <!-- æ˜Ÿåº§çµæœé¡¯ç¤ºå¡ç‰‡ -->
            <div id="zodiac-result-card" class="mt-8 p-6 bg-purple-50 rounded-xl border-t-4 border-indigo-500 shadow-inner">
                <h3 id="display-name" class="text-2xl font-bold text-indigo-700 mb-1">ç­‰å¾…æ‚¨çš„å‘½é‹æ˜Ÿåº§...</h3>
                <p id="display-date" class="text-sm text-gray-500 mb-3">é»æ“Šç¾…ç›¤ä¸­å¿ƒ GO! æˆ–æ‰‹å‹•æ—‹è½‰ä¾†é–‹å§‹</p>
                <p id="display-fortune" class="text-lg text-gray-800 font-medium mb-3">æ­¡è¿ï¼æ‚¨å°‡åœ¨æ­¤çœ‹åˆ°é¸å®šæ˜Ÿåº§çš„è©³ç´°åˆ†æã€‚</p>
                <div class="p-3 bg-indigo-200/50 rounded-lg">
                    <strong class="text-indigo-800">ğŸ”® å¥åº·å°æé†’ï¼š</strong>
                    <span id="display-tip" class="text-indigo-700">é¸æ“‡ä¸€å€‹æ˜Ÿåº§ä¾†è§£é–æ‚¨çš„å°ˆå±¬æç¤ºã€‚</span>
                </div>
            </div>
        </section>
        
        <!-- æ³Œå°¿ç³»çµ±å¥åº·å€å¡Š (æ‰‹é¢¨ç´) -->
        <section class="mb-12 bg-white p-6 rounded-xl shadow-2xl">
            <h2 class="section-title text-2xl font-bold mb-4 border-b pb-2">
                ğŸ©º æ³Œå°¿ç³»çµ±å¥åº·åŸºæœ¬é ˆçŸ¥ (æ•™è‚²è³‡è¨Š)
            </h2>
            <p class="mb-6 text-gray-700">
                æ³Œå°¿ç³»çµ±å°æ–¼äººé«”æ’å‡ºä»£è¬å»¢ç‰©è‡³é—œé‡è¦ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›åŸºç¤çš„å¥åº·å»ºè­°èˆ‡å¸¸è¦‹ç–¾ç—…é é˜²ã€‚
            </p>

            <h3 class="text-xl font-semibold mb-3 section-title">å¸¸è¦‹æ³Œå°¿ç³»çµ±ç–¾ç—…ç°¡ä»‹ (å¯å±•é–‹)</h3>
            
            <div class="space-y-3" id="health-accordion">
                <!-- ç–¾ç—… 1: å°¿è·¯æ„ŸæŸ“ -->
                <div class="accordion-item rounded-lg overflow-hidden shadow-md">
                    <button class="accordion-header w-full flex justify-between items-center p-4 bg-blue-100 hover:bg-blue-200 transition duration-150 font-bold text-blue-800 focus:outline-none" data-target="content-uti">
                        <span>1. å°¿è·¯æ„ŸæŸ“ (UTI)</span>
                        <span class="arrow text-xl transform transition duration-300">â–¼</span>
                    </button>
                    <div id="content-uti" class="accordion-content p-4 bg-white text-gray-700 hidden">
                        <p class="text-sm">
                            ä¸»è¦ç”±ç´°èŒå¼•èµ·ï¼Œå¸¸è¡¨ç¾ç‚ºé »å°¿ã€å°¿æ€¥ã€æ’å°¿æ™‚ç¼ç†±æˆ–ç–¼ç—›ã€‚å¥³æ€§å› ç”Ÿç†çµæ§‹è¼ƒç‚ºå¸¸è¦‹ï¼Œä½†ç”·æ€§ä¹Ÿå¯èƒ½ç™¼ç”Ÿã€‚
                        </p>
                        <p class="text-xs mt-2 italic text-blue-700">
                            é é˜²ï¼šä¿æŒæœƒé™°éƒ¨æ¸…æ½”ã€å¤šå–æ°´æ²–æ´—ã€ä¸ç©¿éç·Šè¡£ç‰©ã€æ€§è¡Œç‚ºå¾Œæ’å°¿ã€‚
                        </p>
                    </div>
                </div>

                <!-- ç–¾ç—… 2: è…çµçŸ³ -->
                <div class="accordion-item rounded-lg overflow-hidden shadow-md">
                    <button class="accordion-header w-full flex justify-between items-center p-4 bg-blue-100 hover:bg-blue-200 transition duration-150 font-bold text-blue-800 focus:outline-none" data-target="content-stones">
                        <span>2. è…çµçŸ³</span>
                        <span class="arrow text-xl transform transition duration-300">â–¼</span>
                    </button>
                    <div id="content-stones" class="accordion-content p-4 bg-white text-gray-700 hidden">
                        <p class="text-sm">
                            å°¿æ¶²ä¸­çš„ç¤¦ç‰©è³ªéåº¦é£½å’Œå½¢æˆçµæ™¶ã€‚å¸¸è¦‹ç—‡ç‹€åŒ…æ‹¬åŠ‡çƒˆçš„è…°éƒ¨æˆ–è…¹è‚¡æºç–¼ç—›ï¼ˆè…çµç—›ï¼‰ã€‚
                        </p>
                        <p class="text-xs mt-2 italic text-blue-700">
                            é é˜²ï¼š**è¶³å¤ é£²æ°´æ˜¯çµ•å°é—œéµ**ï¼›é¿å…é«˜é¹½ã€é«˜è›‹ç™½é£²é£Ÿï¼›é™åˆ¶è‰é…¸æ”å–ï¼ˆå¦‚å·§å…‹åŠ›ã€å …æœã€èŒ¶ï¼‰ã€‚
                        </p>
                    </div>
                </div>
                
                <!-- ç–¾ç—… 3: æ”è­·è…ºè‚¥å¤§ (BPH) -->
                <div class="accordion-item rounded-lg overflow-hidden shadow-md">
                    <button class="accordion-header w-full flex justify-between items-center p-4 bg-blue-100 hover:bg-blue-200 transition duration-150 font-bold text-blue-800 focus:outline-none" data-target="content-bph">
                        <span>3. æ”è­·è…ºè‚¥å¤§ (BPH) - é™ç”·æ€§</span>
                        <span class="arrow text-xl transform transition duration-300">â–¼</span>
                    </button>
                    <div id="content-bph" class="accordion-content p-4 bg-white text-gray-700 hidden">
                        <p class="text-sm">
                            ä¸­è€å¹´ç”·æ€§å¸¸è¦‹ï¼Œæ”è­·è…ºå¢ç”Ÿå£“è¿«å°¿é“ï¼Œå°è‡´æ’å°¿å›°é›£ã€å¤œå°¿å¢å¤šã€å°ä¾¿ç„¡åŠ›ã€‚
                        </p>
                        <p class="text-xs mt-2 italic text-blue-700">
                            é é˜²ï¼šè¦å¾‹æ’å°¿ã€é¿å…å¤§é‡é£²æ°´ï¼ˆå°¤å…¶ç¡å‰ï¼‰ã€æ¸›å°‘å’–å•¡å› å’Œé…’ç²¾æ”å–ã€ä¿æŒé‹å‹•ã€‚
                        </p>
                    </div>
                </div>
            </div>

            <h3 class="text-xl font-semibold mt-8 mb-3 text-red-700">ğŸ”´ é‡è¦é†«ç™‚å…è²¬è²æ˜ ğŸ”´</h3>
            <div class="disclaimer-card p-4 rounded-lg">
                <p class="font-bold text-red-800 mb-2">
                    æœ¬ç¶²ç«™ä¸Šçš„å¥åº·è³‡è¨Šåƒ…ä¾›ä¸€èˆ¬æ€§æ•™è‚²å’Œåƒè€ƒä¹‹ç”¨ï¼Œçµ•ä¸èƒ½æ›¿ä»£å°ˆæ¥­é†«ç™‚å»ºè­°ã€è¨ºæ–·æˆ–æ²»ç™‚ã€‚
                </p>
                <p class="text-red-700 text-sm">
                    å¦‚æœæ‚¨æ‡·ç–‘è‡ªå·±æ‚£æœ‰ä»»ä½•æ³Œå°¿ç³»çµ±ç–¾ç—…ï¼Œ<strong class="text-red-900">è«‹å‹™å¿…ç«‹å³å°‹æ±‚åˆè³‡æ ¼çš„é†«ç™‚å°ˆæ¥­äººå“¡ï¼ˆå¦‚æ³Œå°¿ç§‘é†«ç”Ÿï¼‰é€²è¡Œè¨ºæ–·å’Œæ²»ç™‚ã€‚</strong>
                    å»¶é²å°±é†«å¯èƒ½æœƒå°è‡´ç—…æƒ…æƒ¡åŒ–ã€‚
                </p>
            </div>
        </section>

    </main>

    <footer class="bg-gray-800 text-white text-center p-4 text-sm">
        &copy; 2025 è¶£å‘³èˆ‡å¥åº·è³‡è¨Šç«™ | ç‰ˆæ¬Šæ‰€æœ‰
    </footer>

    <script>
        // ----------------------------------------------------
        // 1. æ˜Ÿåº§æ•¸æ“šçµæ§‹ (Zodiac Data)
        // ----------------------------------------------------
        const zodiacData = [
            { key: 'Aries', sign: 'â™ˆ', name: 'ç‰¡ç¾Šåº§', element: 'ç«è±¡', date: '3/21 - 4/19', fortune: 'æœ¬é€±æ³Œå°¿ç³»çµ±ï¼šç²¾åŠ›æ—ºç››å¯èƒ½ä½¿æ‚¨å¿˜è¨˜å–æ°´ï¼Œæˆ–å› è¡å‹•è¡Œäº‹è€Œå¿½ç•¥è¡›ç”Ÿã€‚è«‹ç¢ºä¿é£²æ°´å……è¶³ï¼Œä¸¦ä¿æŒå€‹äººè¡›ç”Ÿã€‚', tip: 'ç©æ¥µè£œå……æ°´åˆ†ï¼Œå®šæ™‚æ’å°¿ï¼Œé¿å…é£²æ°´ä¸è¶³ã€‚' },
            { key: 'Taurus', sign: 'â™‰', name: 'é‡‘ç‰›åº§', element: 'åœŸè±¡', date: '4/20 - 5/20', fortune: 'æœ¬é€±æ³Œå°¿ç³»çµ±ï¼šå£è…¹ä¹‹æ…¾å¤§å¢ï¼Œå¯èƒ½æ”å–éå¤šé«˜é¹½æˆ–é«˜æ™®æ—é£Ÿç‰©ï¼Œå¢åŠ çµçŸ³é¢¨éšªã€‚è«‹å¤šå–æ°´ï¼Œä¸¦æ§åˆ¶é£²é£Ÿã€‚', tip: 'æ¸›å°‘é‡å£å‘³é£Ÿç‰©æ”å–ï¼Œç¶­æŒæ¶ˆåŒ–ç³»çµ±ç©©å®šã€‚' },
            { key: 'Gemini', sign: 'â™Š', name: 'é›™å­åº§', element: 'é¢¨è±¡', date: '5/21 - 6/20', fortune: 'æœ¬é€±æ³Œå°¿ç³»çµ±ï¼šç¤¾äº¤ç¹å¿™ï¼Œé »ç¹å¤–å‡ºã€‚å¯èƒ½å› ç’°å¢ƒä¸ä¾¿æˆ–éæ–¼å¿™ç¢Œè€Œæ†‹å°¿ã€‚è«‹ç•™æ„èº«é«”ä¿¡è™Ÿï¼Œè¦å¾‹æ’å°¿ã€‚', tip: 'ä¿æŒè¦å¾‹æ’å°¿ç¿’æ…£ï¼Œé¿å…é•·æ™‚é–“æ†‹å°¿ã€‚' },
            { key: 'Cancer', sign: 'â™‹', name: 'å·¨èŸ¹åº§', element: 'æ°´è±¡', date: '6/21 - 7/22', fortune: 'æœ¬é€±æ³Œå°¿ç³»çµ±ï¼šæƒ…ç·’æ³¢å‹•è¼ƒå¤§ï¼Œæ˜“å°è‡´èº«é«”å…ç–«åŠ›ä¸‹é™ã€‚æ³¨æ„ä¸‹è…¹éƒ¨ä¿æš–ï¼Œä¸¦é¿å…é£²ç”¨éå¤šå†°é£²ã€‚', tip: 'æƒ…ç·’ç©©å®šæ˜¯é—œéµï¼Œé¿å…å› å£“åŠ›å½±éŸ¿èº«é«”æ©Ÿèƒ½ã€‚' },
            { key: 'Leo', sign: 'â™Œ', name: 'ç…å­åº§', element: 'ç«è±¡', date: '7/23 - 8/22', fortune: 'æœ¬é€±æ³Œå°¿ç³»çµ±ï¼šéåº¦æ“å‹å¯èƒ½å°è‡´èº«é«”ç™¼ç‚ã€‚è«‹ç¢ºä¿å……è¶³ä¼‘æ¯ï¼Œè‹¥æœ‰æ’å°¿ç¼ç†±ç­‰ç—‡ç‹€ï¼Œæ‡‰ç«‹å³ä¼‘æ¯ä¸¦å°±é†«ã€‚', tip: 'ç¢ºä¿å……è¶³ç¡çœ ï¼Œé¿å…èº«é«”éåº¦è² è·ã€‚' },
            { key: 'Virgo', sign: 'â™', name: 'è™•å¥³åº§', element: 'åœŸè±¡', date: '8/23 - 9/22', fortune: 'æœ¬é€±æ³Œå°¿ç³»çµ±ï¼šéåº¦æ¸…æ½”æˆ–ä¸ç•¶è¡›ç”Ÿç¿’æ…£å¯èƒ½å°è‡´ç§å¯†è™•èŒç¾¤å¤±è¡¡ã€‚å»ºè­°æº«å’Œæ¸…æ½”ï¼Œæ³¨é‡æ’æ³„ç³»çµ±æš¢é€šã€‚', tip: 'å¤šæ”å–çº–ç¶­ï¼Œç¶­æŒè…¸é“å’Œæ’æ³„ç³»çµ±æš¢é€šã€‚' },
            { key: 'Libra', sign: 'â™', name: 'å¤©ç§¤åº§', element: 'é¢¨è±¡', date: '9/23 - 10/22', fortune: 'æœ¬é€±æ³Œå°¿ç³»çµ±ï¼šç‚ºäº†ä¿æŒå„ªé›…å¯èƒ½æ¸›å°‘é£²æ°´æˆ–æ†‹å°¿ã€‚å¹³è¡¡æ˜¯é—œéµï¼è«‹ç¢ºä¿æ°´åˆ†æ”å–ï¼Œä»¥åˆ©è…è‡Ÿæ’æ¯’ã€‚', tip: 'æ¸›å°‘åŠ å·¥é£Ÿå“ï¼Œç¶­æŒèº«é«”æ°´åˆ†å’Œä»£è¬å¹³è¡¡ã€‚' },
            { key: 'Scorpio', sign: 'â™', name: 'å¤©è åº§', element: 'æ°´è±¡', date: '10/23 - 11/21', fortune: 'æœ¬é€±æ³Œå°¿ç³»çµ±ï¼šç”Ÿæ®–å’Œæ³Œå°¿ç³»çµ±çš„å®®ä½èƒ½é‡å¼·å¤§ã€‚æ‡‰ç‰¹åˆ¥æ³¨æ„ç§å¯†è™•å¥åº·ï¼Œä»»ä½•ä¸é©éƒ½æ‡‰å„˜æ—©è™•ç†ã€‚', tip: 'æ³¨é‡å€‹äººè¡›ç”Ÿï¼Œä¸é©æ™‚éœ€å°‹æ±‚å°ˆæ¥­å”åŠ©ã€‚' },
            { key: 'Sagittarius', sign: 'â™', name: 'å°„æ‰‹åº§', element: 'ç«è±¡', date: '11/22 - 12/21', fortune: 'æœ¬é€±æ³Œå°¿ç³»çµ±ï¼šæ—…éŠæˆ–é•·é€”è·‹æ¶‰å¯èƒ½å°è‡´é£²æ°´ç¿’æ…£æ”¹è®Šæˆ–æ†‹å°¿ã€‚åœ¨å¤–æ›´è¦é¤Šæˆå®šæ™‚é£²æ°´ã€å®šæ™‚æ’å°¿çš„å¥½ç¿’æ…£ã€‚', tip: 'æ—…éŠæ™‚æ³¨æ„é£²æ°´èˆ‡é£Ÿç‰©è¡›ç”Ÿï¼Œé é˜²æ„ŸæŸ“ã€‚' },
            { key: 'Capricorn', sign: 'â™‘', name: 'æ‘©ç¾¯åº§', element: 'åœŸè±¡', date: '12/22 - 1/19', fortune: 'æœ¬é€±æ³Œå°¿ç³»çµ±ï¼šå·¥ä½œç‹‚æ¨¡å¼å•Ÿå‹•ï¼Œä¹…åä¸å‹•ï¼Œä¸‹åŠèº«è¡€æ¶²å¾ªç’°å—é˜»ã€‚è«‹å®šæ™‚èµ·èº«ï¼Œåšæ·±è¹²æˆ–ä¼¸å±•é‹å‹•ã€‚', tip: 'å®šæ™‚èµ·èº«æ´»å‹•ï¼Œæ”¹å–„ä¸‹åŠèº«è¡€æ¶²å¾ªç’°ã€‚' },
            { key: 'Aquarius', sign: 'â™’', name: 'æ°´ç“¶åº§', element: 'é¢¨è±¡', date: '1/20 - 2/18', fortune: 'æœ¬é€±æ³Œå°¿ç³»çµ±ï¼šä½œæ¯ä¸è¦å¾‹å¯èƒ½å½±éŸ¿è…ä¸Šè…ºã€‚å˜—è©¦æ¸›å°‘å’–å•¡å› æ”å–ï¼Œå¤šå–ç´”æ°´ï¼Œå¹«åŠ©èº«é«”ç©©å®šå…§åˆ†æ³Œã€‚', tip: 'é¿å…é•·æ™‚é–“æ†‹å°¿ï¼Œå¤šåšä¼¸å±•é‹å‹•ä¿ƒé€²å¾ªç’°ã€‚' },
            { key: 'Pisces', sign: 'â™“', name: 'é›™é­šåº§', element: 'æ°´è±¡', date: '2/19 - 3/20', fortune: 'æœ¬é€±æ³Œå°¿ç³»çµ±ï¼šå®¹æ˜“å—å¤–ç•Œå½±éŸ¿è€Œæ„Ÿåˆ°ç–²æ†Šï¼Œå°è‡´å…ç–«åŠ›ä¸‹é™ã€‚è¦å¾‹ä½œæ¯ï¼Œä¸¦å¤šè£œå……ç¶­ç”Ÿç´ Cï¼Œå¢å¼·æŠµæŠ—åŠ›ã€‚', tip: 'ä¿æŒè¦å¾‹ä½œæ¯ï¼Œå……è¶³ä¼‘æ¯æ˜¯èº«é«”ä¿®å¾©çš„è‰¯è—¥ã€‚' }
        ];

        // ----------------------------------------------------
        // 2. è¼ªç›¤è®Šé‡èˆ‡å‡½æ•¸
        // ----------------------------------------------------
        const wheel = document.getElementById('zodiac-wheel');
        const wheelContainer = document.getElementById('zodiac-wheel-container');
        const centerDecoration = document.getElementById('wheel-center-decoration'); 

        const totalSigns = zodiacData.length;
        const anglePerSign = 360 / totalSigns; // 30 åº¦
        let lastRotation = 0; // è¨˜éŒ„ä¸Šä¸€æ¬¡çš„æ—‹è½‰è§’åº¦ï¼Œç”¨æ–¼èµ·å§‹é»

        // --- æ‰‹å‹•æ—‹è½‰ç›¸é—œè®Šé‡ ---
        let isDragging = false;
        let centerX, centerY;
        let startAngle; // æ»‘é¼ /è§¸æ§é»ç›¸å°æ–¼ä¸­å¿ƒé»çš„è§’åº¦
        let startWheelRotation; // æ‹–æ›³é–‹å§‹æ™‚è¼ªç›¤çš„ CSS æ—‹è½‰è§’åº¦

        /**
         * æå–ç•¶å‰ CSS transform ä¸­çš„æ—‹è½‰è§’åº¦ (degrees)ã€‚
         */
        function getCurrentRotationFromCSS() {
            const transformStyle = window.getComputedStyle(wheel).getPropertyValue('transform');
            if (transformStyle === 'none' || transformStyle === 'matrix(1, 0, 0, 1, 0, 0)') {
                return 0;
            }
            // ä½¿ç”¨ DOMMatrix ç²å–çŸ©é™£å€¼
            const matrix = new DOMMatrix(transformStyle);
            // atan2(sin(theta), cos(theta)) è½‰æ›ç‚ºè§’åº¦
            // ç”±æ–¼ CSS transform matrix æä¾›äº†è§’åº¦ï¼Œé€™è£¡ç›´æ¥è¨ˆç®—
            let angle = Math.round(Math.atan2(matrix.b, matrix.a) * (180 / Math.PI));
            // ç¢ºä¿è§’åº¦ç‚º 0-359 åº¦çš„æ­£å€¼
            return (angle % 360 + 360) % 360; 
        }

        /**
         * è¼”åŠ©å‡½æ•¸ï¼šè¨ˆç®—é» (x, y) ç›¸å°æ–¼è¼ªç›¤ä¸­å¿ƒé»çš„è§’åº¦ (0-360 deg)ã€‚
         */
        function getAngle(x, y) {
            const dx = x - centerX;
            const dy = y - centerY;
            // atan2 è¿”å› -180 åˆ° 180 åº¦ï¼Œè½‰ç‚º 0 åˆ° 360 åº¦çš„**é †æ™‚é‡**è§’åº¦
            // æ³¨æ„ï¼šé€™è£¡ y è»¸æ˜¯å‘ä¸‹ç‚ºæ­£ï¼Œæ‰€ä»¥éœ€è¦ç‰¹åˆ¥è™•ç†
            return (Math.atan2(dy, dx) * 180 / Math.PI + 360) % 360;
        }

        /**
         * æ ¹æ“šç•¶å‰æ—‹è½‰è§’åº¦è¨ˆç®—ä¸¦è¿”å›å°æ‡‰çš„æ˜Ÿåº§æ•¸æ“šã€‚
         */
        function calculateWinningZodiac(rotationDegree) {
            // ç”±æ–¼åœ–ç‰‡ä¸Šçš„ç‰¡ç¾Šåº§åœ¨ 3 é»é˜æ–¹å‘ (0åº¦)ï¼Œè€Œæˆ‘å€‘çš„æ•¸çµ„å¾ 0 åº¦é–‹å§‹ (é ‚éƒ¨)
            // ä¸”åœ–ç‰‡ä¸Šçš„æ˜Ÿåº§æ˜¯é †æ™‚é‡æ’åˆ—çš„ï¼Œä½†æ—‹è½‰æ˜¯åæ™‚é‡çš„ï¼ˆè² è§’åº¦ï¼‰ã€‚
            // é€™è£¡éœ€è¦å°‡ CSS æ—‹è½‰è§’åº¦è½‰æ›ç‚ºæ˜Ÿç›¤åœ–ç‰‡ä¸Šçš„æŒ‡å‘è§’åº¦ã€‚

            // 1. ç¢ºä¿ rotationDegree æ˜¯æ­£å€¼ (0-360)
            const normalizedRotation = (rotationDegree % 360 + 360) % 360;

            // 2. ç¾…ç›¤æŒ‡é‡ (é ‚éƒ¨ 12 é»é˜ä½ç½®) æ‡‰å°æ‡‰çš„æ˜Ÿåº§ä½ç½®
            // ç¾…ç›¤åœ–ç‰‡ä¸­ï¼Œç‰¡ç¾Šåº§ (Aries, æ•¸çµ„ç´¢å¼• 0) åœ¨ 3 é»é˜ä½ç½® (90åº¦)
            // æˆ‘å€‘éœ€è¦æ‰¾åˆ°**æŒ‡é‡** (ä½æ–¼ 270 åº¦ï¼Œå³ -90 åº¦) æŒ‡å‘çš„è§’åº¦ã€‚
            
            // 3. èª¿æ•´è§’åº¦ä»¥åŒ¹é…æŒ‡é‡ä½ç½® (å°‡æŒ‡é‡è¦–ç‚º 0 åº¦åŸºæº–)
            // ç¾…ç›¤æ˜¯é †æ™‚é‡æ’åˆ—ï¼šAries(0) -> Taurus(1) -> ... Pisces(11)
            // ç¾…ç›¤åœ–ç‰‡ä¸Šï¼ŒAries åœ¨ 90åº¦ã€‚
            
            // æŒ‡é‡æŒ‡å‘çš„è§’åº¦ = (360 - æ—‹è½‰è§’åº¦ + 90) % 360
            // ç°¡åŒ–è¨ˆç®—ï¼š
            // æŒ‡é‡ä½æ–¼ 270 åº¦ (æˆ– -90 åº¦)ã€‚
            
            // å‡è¨­ï¼šæŒ‡é‡åœ¨ 0 åº¦æ™‚ï¼Œæ‡‰æŒ‡å‘ç‰¡ç¾Šåº§ (index 0)
            // ç‰¡ç¾Šåº§åœ¨åœ–ç‰‡ä¸Šçš„è§’åº¦æ˜¯ 90 åº¦
            // ä¿®æ­£è§’åº¦ = (270 - normalizedRotation) % 360
            
            // ç¶“éæ¸¬è©¦ï¼Œæœ€ç°¡å–®çš„æ–¹æ³•æ˜¯ï¼š
            // (1) æ‰¾åˆ°æŒ‡æ¨™åœ¨è¼ªç›¤ä¸Šçš„ä½ç½® (360 - normalizedRotation)
            let indicatorAngle = (360 - normalizedRotation + 360) % 360;

            // (2) ç”±æ–¼ç‰¡ç¾Šåº§åœ¨ 90 åº¦ä½ç½®ï¼Œæˆ‘å€‘éœ€è¦å¾ 90 åº¦é–‹å§‹è¨ˆç®—ç´¢å¼•
            // è®“ Aries (Index 0) å°æ‡‰ 90åº¦ï¼ŒTaurus (Index 1) å°æ‡‰ 120åº¦...
            // 360åº¦ - 90åº¦ = 270åº¦
            let adjustedAngle = (indicatorAngle - 90 + 360) % 360;


            // (3) è¨ˆç®—ç´¢å¼• (30 åº¦ç‚ºä¸€å€‹æ˜Ÿåº§)
            // 0 åº¦çš„ç´¢å¼•ç‚º 0ï¼Œ30 åº¦ç‚º 1...
            let rawIndex = adjustedAngle / anglePerSign;

            // (4) å››æ¨äº”å…¥åˆ°æœ€è¿‘çš„æ•´æ•¸ç´¢å¼•
            const winningIndex = Math.round(rawIndex) % totalSigns;

            // ç¢ºä¿è¿”å›çš„ç´¢å¼•åœ¨ 0-11 ç¯„åœå…§
            return zodiacData[winningIndex];
        }


        // --- æ‹–æ›³äº‹ä»¶è™•ç† (Drag/Touch Handlers) ---

        function startDrag(e) {
            // å¦‚æœå‹•ç•«æ­£åœ¨é‹è¡Œï¼Œå‰‡ç¦ç”¨æ‰‹å‹•æ‹–æ›³
            if (centerDecoration.style.pointerEvents === 'none') return;
            
            // ç¦ç”¨ CSS transition ä»¥ä¾¿å³æ™‚æ—‹è½‰
            wheel.style.transition = 'none'; 
            
            isDragging = true;
            
            const rect = wheel.getBoundingClientRect();
            // è¨ˆç®—è¼ªç›¤ä¸­å¿ƒçš„è¦–åœ–åº§æ¨™
            centerX = rect.left + rect.width / 2;
            centerY = rect.top + rect.height / 2;
            
            const clientX = e.clientX || e.touches[0].clientX;
            const clientY = e.clientY || e.touches[0].clientY;
            
            // è¨˜éŒ„ç•¶å‰è¼ªç›¤çš„å¯¦éš›æ—‹è½‰è§’åº¦ (0-359)
            startWheelRotation = getCurrentRotationFromCSS();
            
            // è¨˜éŒ„æ»‘é¼ /è§¸æ§é»ç›¸å°æ–¼ä¸­å¿ƒçš„èµ·å§‹è§’åº¦
            startAngle = getAngle(clientX, clientY);

            // å…¨å±€ç¶å®šç§»å‹•å’ŒçµæŸç›£è½å™¨
            window.addEventListener('mousemove', moveDrag);
            window.addEventListener('mouseup', endDrag);
            window.addEventListener('touchmove', moveDrag, { passive: false });
            window.addEventListener('touchend', endDrag);

            // éš±è—çµæœå¡ç‰‡
            document.getElementById('zodiac-result-card').classList.remove('show-result');
        }

        function moveDrag(e) {
            if (!isDragging) return;
            
            e.preventDefault(); // é˜²æ­¢æ»¾å‹•ç­‰é è¨­è¡Œç‚º

            const clientX = e.clientX || e.touches[0].clientX;
            const clientY = e.clientY || e.touches[0].clientY;

            const currentAngle = getAngle(clientX, clientY);
            
            // è¨ˆç®—èµ·å§‹é»å’Œç•¶å‰é»çš„è§’åº¦å·®
            let angleDifference = currentAngle - startAngle;

            // æ–°çš„æ—‹è½‰è§’åº¦ = è¼ªç›¤èµ·å§‹è§’åº¦ + è§’åº¦å·®
            // æ³¨æ„ï¼šæ‰‹å‹•æ—‹è½‰çš„æ–¹å‘èˆ‡ CSS æ—‹è½‰æ–¹å‘ç›¸å (CSS rotate é †æ™‚é‡ç‚ºæ­£)
            lastRotation = startWheelRotation - angleDifference; 
            
            // æ‡‰ç”¨æ–°çš„æ—‹è½‰
            wheel.style.transform = `rotate(${lastRotation}deg)`;

            // å¯¦æ™‚æ›´æ–°çµæœå¡ç‰‡ (å³æ™‚åæ‡‰é€Ÿåº¦)
            displayResultFromManualStop();
        }

        function endDrag() {
            if (!isDragging) return;
            isDragging = false;
            
            // é‡æ–°å•Ÿç”¨ CSS transition
            wheel.style.transition = 'transform 0.3s ease-out'; // å¢åŠ ä¸€å€‹å°å°çš„æ…£æ€§å¹³æ»‘éæ¸¡

            // ç§»é™¤ç›£è½å™¨
            window.removeEventListener('mousemove', moveDrag);
            window.removeEventListener('mouseup', endDrag);
            window.removeEventListener('touchmove', moveDrag);
            window.removeEventListener('touchend', endDrag);
            
            // ç²å–æœ€çµ‚åœæ­¢è§’åº¦ (åœ¨ 0.3s éæ¸¡å¾Œ)
            const finalRotation = getCurrentRotationFromCSS(); 
            lastRotation = finalRotation;
            
            // æœ€å¾Œä¸€æ¬¡æ›´æ–°çµæœ (ç¢ºä¿åœæ­¢æ™‚çš„çµæœæ˜¯æº–ç¢ºçš„)
            displayResultFromManualStop();
        }

        /**
         * è™•ç†æ‰‹å‹•æ—‹è½‰åœæ­¢æ™‚çš„çµæœé¡¯ç¤º
         */
        function displayResultFromManualStop() {
            // ç²å–ç•¶å‰æ—‹è½‰è§’åº¦ï¼Œç”¨æ–¼è¨ˆç®—æŒ‡é‡æŒ‡å‘çš„æ˜Ÿåº§
            const currentRotation = getCurrentRotationFromCSS();
            const winningData = calculateWinningZodiac(currentRotation); 

            // å³æ™‚æ›´æ–°çµæœ
            displayZodiacResult(winningData);

            // é¡¯ç¤ºçµæœå¡ç‰‡
            document.getElementById('zodiac-result-card').classList.add('show-result');
        }

        // --- è‡ªå‹•æ—‹è½‰äº‹ä»¶è™•ç† (GO! Button Handler) ---

        /**
         * å•Ÿå‹•è¼ªç›¤æ—‹è½‰å‹•ç•«
         */
        function spinWheel() {
            if (centerDecoration.style.pointerEvents === 'none') return;
            
            centerDecoration.style.pointerEvents = 'none'; // ç¦ç”¨é»æ“Šå’Œæ‹–æ›³
            centerDecoration.textContent = 'è½‰å‹•ä¸­...';
            wheelContainer.style.cursor = 'wait'; // æ”¹è®Šé¼ æ¨™æ¨£å¼

            // é‡æ–°å•Ÿç”¨ CSS transition (ç”¨æ–¼å‹•ç•«æ—‹è½‰)
            wheel.style.transition = 'transform 5s cubic-bezier(0.25, 0.1, 0.25, 1)'; 

            // éš¨æ©Ÿé¸å®šä¸€å€‹åœæ­¢çš„ç´¢å¼• (0-11)
            const winningIndex = Math.floor(Math.random() * totalSigns); 
            
            // èª¿æ•´åˆ°ç›®æ¨™æ˜Ÿåº§éœ€è¦è½‰å‹•çš„åº¦æ•¸
            // æˆ‘å€‘çš„ calculateWinningZodiac é‚è¼¯æ˜¯å°æ‡‰é †æ™‚é‡æ—‹è½‰è§’åº¦ (0~360)
            const degreesToAlign = winningIndex * anglePerSign; 
            
            // åŠ ä¸Šå¤šåœˆæ—‹è½‰ (è‡³å°‘ 5 åœˆ) å¢åŠ å‹•ç•«æ•ˆæœã€‚
            // ç¸½æ—‹è½‰ = åŸºç¤æ—‹è½‰ + ç›®æ¨™è§’åº¦
            // ç”±æ–¼ CSS æ—‹è½‰é †æ™‚é‡ç‚ºæ­£ï¼Œæˆ‘å€‘è¦è®“æŒ‡é‡ï¼ˆä½æ–¼é ‚éƒ¨ï¼‰æŒ‡å‘æ˜Ÿåº§ã€‚
            // æŒ‡é‡æŒ‡å‘ç‰¡ç¾Šåº§ (Index 0) æ‡‰å°æ‡‰ -90 åº¦ (90åº¦é †æ™‚é‡åˆ°é ‚éƒ¨ 0åº¦)
            const baseRotation = getCurrentRotationFromCSS();
            const targetRotation = (baseRotation - degreesToAlign) + (360 * 5); // æ—‹è½‰ 5 åœˆä»¥ä¸Š
            
            lastRotation = targetRotation;

            // éš±è—çµæœå¡ç‰‡
            document.getElementById('zodiac-result-card').classList.remove('show-result');
            
            // æ‡‰ç”¨æ—‹è½‰
            wheel.style.transform = `rotate(${lastRotation}deg)`;

            // è¨­ç½®å‹•ç•«çµæŸäº‹ä»¶
            wheel.addEventListener('transitionend', handleSpinEnd, { once: true });
        }

        /**
         * æ—‹è½‰çµæŸæ™‚è™•ç†çµæœ (å‹•ç•«çµæŸ)
         */
        function handleSpinEnd() {
            centerDecoration.style.pointerEvents = 'auto'; // å•Ÿç”¨ä¸­å¿ƒé»é»æ“Š
            centerDecoration.textContent = 'GO!';
            wheelContainer.style.cursor = 'grab'; // æ¢å¾©é¼ æ¨™æ¨£å¼

            // ç²å–æœ€çµ‚åœæ­¢è§’åº¦ (ä¿®å¾©å¾Œä½¿ç”¨ getCurrentRotationFromCSS)
            lastRotation = getCurrentRotationFromCSS(); 
            const winningData = calculateWinningZodiac(lastRotation);
            
            // ç«‹å³é¡¯ç¤ºçµæœ (ç§»é™¤ setTimeout)
            displayZodiacResult(winningData);
            document.getElementById('zodiac-result-card').classList.add('show-result');
        }

        /**
         * æ›´æ–°çµæœé¡¯ç¤ºå¡ç‰‡å…§å®¹
         */
        function displayZodiacResult(data) {
            document.getElementById('display-name').textContent = `${data.sign} ${data.name} (${data.element})`;
            document.getElementById('display-date').textContent = `æœ¬é€±æ³Œå°¿ç³»çµ±é‹å‹¢`;
            document.getElementById('display-fortune').textContent = data.fortune;
            document.getElementById('display-tip').textContent = data.tip;
        }
        
        // ----------------------------------------------------
        // 3. æ‰‹é¢¨ç´ (Accordion) å‡½æ•¸
        // ----------------------------------------------------
        function setupAccordions() {
            document.querySelectorAll('.accordion-header').forEach(header => {
                header.addEventListener('click', () => {
                    const contentId = header.getAttribute('data-target');
                    const content = document.getElementById(contentId);
                    const arrow = header.querySelector('.arrow');

                    const isVisible = !content.classList.contains('hidden');

                    // éš±è—æ‰€æœ‰å…§å®¹ï¼Œåªå±•é–‹ç•¶å‰é»æ“Šçš„é …ç›®
                    document.querySelectorAll('.accordion-content').forEach(c => {
                        if (c !== content) {
                            c.classList.add('hidden');
                             document.querySelector(`[data-target="${c.id}"] .arrow`).classList.remove('rotate-180');
                        }
                    });

                    // å±•é–‹/æ”¶åˆç•¶å‰å…§å®¹
                    if (!isVisible) {
                        content.classList.remove('hidden');
                        arrow.classList.add('rotate-180');
                    } else {
                         arrow.classList.remove('rotate-180');
                         content.classList.add('hidden');
                    }
                });
            });
        }

        // ----------------------------------------------------
        // 4. åˆå§‹åŒ–
        // ----------------------------------------------------
        window.onload = function () {
            // ç¶å®š GO! æŒ‰éˆ•äº‹ä»¶ (è‡ªå‹•æ—‹è½‰)
            centerDecoration.addEventListener('click', spinWheel);

            // ç¶å®šè¼ªç›¤æ‹–æ›³äº‹ä»¶ (æ‰‹å‹•æ—‹è½‰)
            wheelContainer.addEventListener('mousedown', startDrag);
            // { passive: false } ç¢ºä¿æˆ‘å€‘å¯ä»¥èª¿ç”¨ preventDefault() ä¾†ç¦ç”¨ç€è¦½å™¨é è¨­çš„æ»¾å‹•è¡Œç‚º
            wheelContainer.addEventListener('touchstart', startDrag, { passive: false }); 

            // ç¶å®šæ‰‹é¢¨ç´äº‹ä»¶
            setupAccordions();

             // é è¨­å°‡å¡ç‰‡å…§å®¹è¨­å®šç‚ºåˆå§‹ç‹€æ…‹
             document.getElementById('display-name').textContent = `ç­‰å¾…æ‚¨çš„å‘½é‹æ˜Ÿåº§...`;
             document.getElementById('display-date').textContent = `é»æ“Šç¾…ç›¤ä¸­å¿ƒ GO! æˆ–æ‰‹å‹•æ—‹è½‰ä¾†é–‹å§‹`;
             document.getElementById('display-fortune').textContent = `æ­¡è¿ï¼æ‚¨å°‡åœ¨æ­¤çœ‹åˆ°é¸å®šæ˜Ÿåº§çš„è©³ç´°åˆ†æã€‚`;
             document.getElementById('display-tip').textContent = `é¸æ“‡ä¸€å€‹æ˜Ÿåº§ä¾†è§£é–æ‚¨çš„å°ˆå±¬æç¤ºã€‚`;
        };

    </script>
</body>
</html>

